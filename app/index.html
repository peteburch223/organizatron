<!doctype html>
<html lang="en" ng-app="organizatronApp">
 <head>
   <meta charset="utf-8">
   <link href='https://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
   <link rel="stylesheet" type="text/css" href="/css/stylesheet.css">
   <script src="bower_components/angular/angular.js"></script>
   <script src="js/app.js"></script>
   <script src="js/controllers/OrganizatronController.js"></script>
   <script src="js/services/MaterialFactory.js"></script>
   <script src="js/services/MaterialService.js"></script>
   <script src="js/services/TagFactory.js"></script>
   <script src="js/services/TagService.js"></script>
   <script src="js/services/VoteService.js"></script>
   <title>organizatron App</title>
 </head>
 <body>
  <div id="organizatron" ng-controller="OrganizatronController as controller">
    <section id="add-material">
      <h2>Add new Material</h2>

      <div class="add-material-input">
        <label for="material-title">Material name: </label>
        <input id="add-material-title" type="text" ng-model="materialName">
      </div>

      <div class="add-material-input">
        <label for="material-url">Material URL: </label>
        <input id="add-material-url" type="text" ng-model="linkUrl">
      </div>

      <div class="add-material-input">
        <label for="material-description">Description: </label>
        <input id="add-material-description" type="text" ng-model="materialDescription">
      </div>

      <div class="add-material-input">
        <label for="material-tag">Tag: </label>
        <input id="add-material-tag" type="text" ng-model="materialTag">
      </div>

      <div class="add-material-input">
        <button id="save-material" type="button" ng-click="controller.addMaterial({ title:materialName, link_url:linkUrl, description:materialDescription, tags:materialTag })">Add Material</button>
      </div>
      <div class="clear"></div>
    </section>

    <section id="tag-list">
      <div id="available-tags">
        <h2>Available Tags</h2>
        <div class="tags" ng-repeat="tag in controller.tagsForSelection">
          <button ng-click="controller.selectTag(tag)" id="{{ tag.id }}">{{ tag.name }}</button>
        </div>
      </div>

      <div id="selected-tags">
        <h2>Selected Tags</h2>
        <div class="tags" ng-repeat="tag in controller.selectedTags">
          <button ng-click="controller.removeTag(tag)" id="{{ tag.id }}">{{ tag.name }}</button>
        </div>
      </div>

      <div class="clear"></div>
      <!-- <button id="select-tags" type="button" ng-click="controller.fetchMaterials()">Fetch Material</button> -->
    </section>

    <section id="material-list">
      <div class="materials" ng-repeat="material in controller.materials">
        <a ng-href="{{ material.link }}">{{ material.title }}</a>
        <p>{{ material.description }}</p>
        <div class="material-tags" ng-repeat="materialTag in material.tags">
          <p>{{ materialTag.name }} Votes: {{ materialTag.votes }}</p>
          <button id="vote-up" type="button" ng-click="controller.sendVote({vote: {material_id: material.id, tag_id: materialTag.id, value: 1}}, materialTag)">Upvote</button>
          <button id="vote-down" type="button" ng-click="controller.sendVote({vote: {material_id: material.id, tag_id: materialTag.id, value: -1}}, materialTag)">Downvote</button>
        </div>
      </div>
    </section>
   </div>
 </body>
</html>
